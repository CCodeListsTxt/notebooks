信号槽以观察者模式实现，当某个事件产生后，发出一个信号。信号被广播，如果有对象连接了相应的处理槽函数，将自动回调槽函数。

信号的发出者是实例化的类对象，槽函数的所有者也是实例化的类对象。

信号的参数可以大于等于其绑定的槽函数的参数个数，但类型需要匹配。

槽函数本身也可以是一个信号函数，一个信号可以触发另一个信号。


---

#### 连接信号和槽函数

```cpp
// sender :		信号发送对象
// signal : 	信号函数地址
// receiver :	信号接受对象
// method :		槽函数地址
// type : 		信号和槽的关联方式
//		Qt::AutoConnection : 	缺省值，如果发送者和接收者在同一个线程，使用Qt::DirectConnection的方式，否则使用Qt::QueuedConnection
//		Qt::DirectConnection : 	信号发送后立即执行槽函数
// 		Qt::QueuedConnection : 	当事件循环回到接收者时执行槽函数
//		Qt::BlockingQueuedConnection : 信号线程阻塞直到槽函数执行完毕
static QMetaObject::Connection QObject::connect(
    const QObject *sender, const char *signal,
    const QObjec *receiver, const char *method,
    Qt::ConnectionType type = Qt::AutoConnection);

static QMetaObject::Connection QObject::connect(
    const QObject *sender, const char *signal,
    const char *method,
    Qt::ConnectionType type = Qt::AutoConnection);
```

connect还有模板重载，无论槽函数是成员函数、静态函数、全局函数还是lambda表达式，都能正确地接受信号函数的参数

---

#### 断开连接

```cpp
static bool QObject::disconnect(
    const QObject *sender, const char *signal,
    const QObject *receiver, const char *method);
```

disconnect一般有以下三种使用场景

* 断开sender的所有信号

  ```cpp
  QObject::disconnect(sender, nullptr, nullptr, nullptr);
  // 等价
  sender->disconnect();
  ```

* 断开sender的signal

  ```cpp
  QObject::disconnect(sender, signal, nullptr, nullptr);
  // 等价
  sender->disconnect(signal);
  ```

* 断开sender发送到receiver的所有信号

  ```cpp
  QObject::disconnect(sender, nullptr, receiver, nullptr);
  // 等价
  sender->disconnect(receiver);
  ```


---

#### 继承QT类

* 自定义类的头文件中加入`Q_OBJECT`宏

    ```cpp
    class MyObject : public QObject
    {
       	Q_OBJECT
    public:
    	MyObject(){}
        ~MyObject(){}
    };
    ```

* 自定义类必须定义构造函数和析构函数

---

#### 自定义信号

* 特性
  * 信号函数只需要声明，无需定义，最终的实参会传递给对应槽函数
  * 发送信号的实质就是调用信号函数。在调用信号函数时，可以加上`emit`显示声明发送信号
  
* 要求
  * 信号函数是类的成员函数
  * 返回值是`void`
  * 使用`signals`做权限修饰符

---

#### 自定义槽函数

* 特性
  * 槽函数的参数接受调用信号函数时传递的参数
  * 槽函数可以是全局函数、成员函数、静态函数、lambda表达式

* 要求
  * 返回值是`void`
  
* 使用QObject的成员函数`sender()`可以得到信号发送者的指针

  