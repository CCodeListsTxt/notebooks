Asio中一共有四种Timer类型，其中最常用的分别是`steady_timer`和`system_timer`，两者是使用不同时钟的模板类`basic_waitable_timer`的实例。

---

#### 等待

`basic_waitable_timer`可以同时挂起一个同步和多个异步等待，可以使用`cancel_one()`或`cancel()`取消异步等待。

`wait()`进行同步等待，`async_wait()`进行异步等待。

> 异步等待需要传入异步处理函数，其原型为`void (const asio::error_code)&`。

```cpp
int main()
{
    asio::io_context io;
    asio::steady_timer timer(io,std::chrono::seconds(3));

    timer.async_wait([](const asio::error_code& err){
        std::cout << "async wait 3s\n";
    });

    timer.wait();
    std::cout << "sync wait 3s\n";

    io.run();
    return 0;
}
```

---

#### 过期时间

在创建Timer对象时，可额外传入一个时间段，其表示从创建时开始，相对时间后当前计时器过期。当计时器过期时，其上挂起的所有等待都会被处理。

```cpp
int main()
{
    asio::io_context io;
    asio::steady_timer timer(io,std::chrono::seconds(3));

    std::this_thread::sleep_for(std::chrono::seconds(3));
    std::cout << "sleep 3s\n";

    // timer已过期，此处不会再阻塞。
    timer.wait();
    std::cout << "sync wait 3s\n";

    io.run();
    return 0;
}
```

还可使用`expires_after()`和`expire_at()`重新设置Timer的过期时间，前者设置相对时间，后者设置绝对时间。