C++20引入了概念，其用来约束模板参数。`concept`用于定义概念，`requires`用于表达约束，概念是一组命名的约束。

###### 概念和概念表达式

```cpp
// 定义概念
template<parameter_list>
concept concept_name = const_expression;

// 概念表达式
concept_name <parameter_list>;
```

```cpp
template<typename T>
concept SizeIsFour = sizeof(T) == 4;

int main()
{
	std::cout << SizeIsFour<int>;	// true
	return 0;
}
```

###### 约束表达式

```cpp
// 表达式结构
requires (parameters_list) { requirements; };

// 简单requirement，要求T必须可以自增
template<typename T>
concept Incable = requires(T t) { t++; ++t; };

// 类型requirement，要求T必须拥有ValueType类型成员
template<typename T>
concept C = requires(T t) { typename T::value_type; };

// 复合requirement，要求T::call不会抛出异常，且返回值为size_t
template<typename T>
concept C = requires(T t) {{ t.call() }noexcept -> std::convertible_to<size_t>; };

// 嵌套requirement，要求T可以自增，且大小为4字节
template<typename T>
concept C = requires(T t) {
    requires sizeof(t) == 4;
    requires Incable<T>;
};
```

约束表达式不会被执行，只会在编译时检查。标准库`<concepts>`中定义了一系列标准库的盖帘。

###### 类型约束

```cpp
// 使用约束类型替换typename或class
template<Incable T>
void inc(T& t) {}

// 使用require子句
template<typename T> requires Incable<T>
void inc(T& t);

// 使用require表达式
template<typename T> requires requires(T t) { ++t; t++; }
```

