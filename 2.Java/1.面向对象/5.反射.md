程序运行期间，Java虚拟机通过`Class`类为所有类维护其类型信息，`Object`实现了`getClass()`可以获取当前类的`Class`实例对象，也可以直接通过`类名.class`访问这个实例对象。

###### 获取类

`Class.forName()`可以通过字符串获取其对应的类的`Class`实例对象，字符串必须包含完整包名。

```java
public static void main(String[] args) {
    try {
        System.out.println(Class.forName("java.lang.String").getName()); // java.lang.String
    } catch (Exception ignored) {
    }
}
```

###### 构造对象

`getConstructor()`可以根据传入的参数，匹配一个合适的构造器，并返回`Constructor<T>`对象实例，通过其`newInstance()`方法，可以构造一个对象实例。

```java
public static void main(String[] args) {
    try {
        String str = (String) Class.forName("java.lang.String")
                .getConstructor(String.class)
                .newInstance("hello world");
        System.out.println(str); // hello world
    } catch (Exception ignored) {
    }
}
```

###### 获取成员信息

`java.lang.reflect`中定义了三个类`Field`、`Method`和`Constructor`，分别用于描述类的字段、方法和构造器。通过类的`Class`示例对象，可以访问该类的所有字段、方法和构造器。

`getFieldds()`可以得到类的所有可访问的公共字段，包括继承得到的。`getDeclaredFields()`可以得到类的所有字段，不包括继承得到的。

```java
public class App {
    public static void main(String[] args) {
        for (var field : Derive.class.getFields()) {
            System.out.println(field.getName());
            // derive_public_filed
            // base_public_filed
        }
        for (var field : Derive.class.getDeclaredFields()) {
            System.out.println(field.getName());
            // derive_public_filed
            // derive_private_filed
            // this$0
        }
    }

    class Base {
        public int base_public_filed;
        private int base_private_filed;
    }

    class Derive extends Base {
        public int derive_public_filed;
        private int derive_private_filed;
    }
}
```

同理，还存在`getMethods()`、`getDeclaredMethods()`、`getConstructors()`和`getDeclaredConstructors()`。

还可以使用`getField()`、`getMethod()`等获取单个成员的信息。

###### 访问字段和调用函数

通过`Field`的`get()`和`set()`，可以动态操作任意对象的任意可访问字段。

通过`Method`的`invoke()`，可以动态调用任意对象的任意可访问方法。

```java
public class App {
    public static void main(String[] args) {
        App app = new App();
        try {
            App.class.getField("data").set(app, 10);
            App.class.getMethod("call").invoke(app);    // 10
        } catch (Exception ignored) {
        }
    }

    public int data = 0;

    public void call() {
        System.out.println(data);
    }
}
```

###### 修饰符

`Class`、`Field`、`Method`、`Constructor`都实现了`getModifiers()`方法，可以获取一个整数，表示其修饰符。通过`Modifer`的静态方法，可以判断其是否具有某个修饰符。

如`Modifer.isAbstract()`判断是否抽象，`Modifer.isPublic()`判断是否受保护。

