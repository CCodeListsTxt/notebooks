#### 动态加载

* `loadfile()`，加载Lua文件，成功返回一个函数。

* `dofile()`，执行Lua文件中的代码。

* `load()`，加载Lua字符串代码，成功返回一个函数，且不涉及词法定界。

  ```lua
  local var = 0
  load("print(var)")()    -- nil
  ```

---

#### 模块

* 通过`require()`导入模块
  * 如果模块是Lua代码，那么其返回值就是模块代码中的返回值
  * 如果模块是C库，那么其返回值是库中`openlua_packname()`函数的返回值。

* Lua标准库都是模块，且在运行用户代码前会自动加载。

  ```lua
  print(require "string" == string)  -- true
  ```

* `package.loaded`中，包含了所有已加载模块的信息

  ```lua
  for k,v in pairs(package.loaded) do
      print(k,v)
  end
  ```

* 搜索路径：

  * `package.path`字符串，指定了`require()`在搜索Lua文件的路径。
  * `package.cpath`字符串，指定了搜索C库文件的路径。

  `require()`会优先搜索Lua代码，再搜索C库。