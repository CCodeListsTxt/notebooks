#### 简介

* Lua中的表是一个关联数组，索引和值可以是任意合法类型数据。通过不同类型的索引，表可以实现数组、集合、键值对等多种数据结构。
* 通过 `{}` 构造表达式创建表，且所有的表都是匿名的，变量只是一个引用。

---

#### 索引类型

* 可以使用任何非`nil`值作为表的索引，当索引为字符时，除了通过 `[]` 访问，还可以直接使用 `.` 访问。

  ```lua
  local tab = {
      key = "value"
  }
  
  print(tab["key"])
  print(tab.key)
  ```

* Lua在进行表索引时，存在一些相等性问题：

  * 对于数值类型：

    ```lua
    local tab = {
        [1] = "value"
    }
    
    print(tab[1])                   -- value
    print(tab[1.0])                 -- value
    print(tab[1.000000000000001])   -- nil
    print(tab[1.0000000000000001])  -- value
    ```

  * 对于字符串类型：

    ```lua
    local tab = {
        ["1"] = "value"
    }
    
    print(tab["1"])                   -- value
    print(tab["1.0"])                 -- nil
    print(tab["1.00000000001"])       -- nil
    print(tab["1.0000000000000001"])  -- nil
    ```

  * 对于表类型：

    ```lua
    local meta = {
        __eq = function()
            return true
        end
    }
    local key1 = setmetatable({}, meta)
    local key2 = setmetatable({}, meta)
    
    local tab = {
        [key1] = "value"
    }
    
    print(key1 == key2)             -- true
    print(tab[key1] == tab[key2])   -- flase
    ```

  ---

#### 表构造器

* 记录式，以 `键 = 值` 的方式初始化字段。

* 列表式，直接以 `值` 的方式初始化字段，索引默认从1开始递增。

* 通用式，以 `[expr] = 值` 的方式初始化字段，`expr`可以是任意合法表达式。

    ```lua
    local tab = {
    key = "value",
    "value",
    ["other" .. "key"] = "other value"
    }
    ```

---

#### 序列

* 表中从索引1开始，到第一个`nil`的部分，称为序列。
* 使用 `#` 操作符可以获取表中序列部分的长度。

---

  #### 遍历

* 通过 `pairs()` 迭代生成器，遍历表中的所有键值对——包括序列部分。
* 通过`ipairs()` 迭代生成器，遍历表中的序列部分。

---

#### 表标准库

| 标准库函数       | 说明                                                         |
| ---------------- | ------------------------------------------------------------ |
| `table.concat()` | 给一个所有元素都是字符串或数值的序列，返回拼接后的字符串。   |
| `table.insert()` | 向序列部分插入一个元素。默认插入到末尾                       |
| `table.remove()` | 移除序列部分指定位置的元素，并返回。默认移除最后一个元素。   |
| `table.sort()`   | 对序列进行原地排序，可以指定排序函数。                       |
| `table.pack()`   | 将传入的所有参数打包，并返回一个序列，且包含一个额外的`n`字段，表示序列长度。 |
| `table.unpack()` | 解包表中的所有元素，并返回。                                 |

